{{define "details"}}
    <rm-task-details task-id="{{itoa .ID}}">
        <div class="details__body">
            <div class="detail__title">
                <form
                  class="add-tasks"
                  hx-put="{{concat "/partials/tasks/" (itoa .ID) "/title"}}"
                  method="POST"
                  hx-swap="outerHTML"
                  hx-target="{{concat ".tasks__list > li[data-id='" (itoa .ID) "']"}}">
                    <input
                        class="title"
                        name="title"
                        type="text"
                        value="{{.Title}}"
                        minlength="3"
                        maxlength="255"
                        hx-validate="true"/>
                    <button class="rename" type="submit">Rename</button>
                </form>
            </div>
            <div class="details__priority">
                <label for="priority">Priority</label>
                <select
                    name="priority"
                    hx-put="{{concat "/partials/tasks/" (itoa .ID) "/priority"}}"
                    hx-trigger="change"
                    hx-swap="outerHTML"
                   	hx-target="{{concat ".tasks__list > li[data-id='" (itoa .ID) "']"}}">
                    {{range $i, $value := priorityValues}}
                        {{if eq $i $.Priority}}
                            <option value="{{itoa $i}}" selected>{{$value}}</option>
                        {{else}}
                            <option value="{{itoa $i}}">{{$value}}</option>
                        {{end}}
                    {{end}}
                </select>
            </div>
            <div class="details__schedule">
            	<label>
             		<span>Start Date</span>
             		<input
               			name="from"
                  		type="date"
                    	value="{{formatDateOnly .StartAt}}"
                      	hx-put="{{concat "/partials/tasks/" (itoa .ID) "/date-start"}}"
                       	hx-trigger="change"
                        hx-swap="outerHTML"
                        hx-target="{{concat ".tasks__list > li[data-id='" (itoa .ID) "']"}}">
             	</label>
             	<label>
              		<span>Due Date</span>
              		<input
                		name="to"
                  		type="date"
                    	value="{{formatDateOnly .EndAt}}"
                     	hx-put="{{concat "/partials/tasks/" (itoa .ID) "/date-end"}}"
                     	hx-trigger="change"
                      	hx-swap="outerHTML"
                       hx-target="{{concat ".tasks__list > li[data-id='" (itoa .ID) "']"}}">
              	</label>
            </div>
            <div class="detail__note">
                <form
                    hx-put="{{concat "/partials/tasks/" (itoa .ID) "/description"}}"
                    hx-vals='js:{description: getDescription()}'
                    hx-swap="none" method="POST">
                    <div id="note-editor" class="ql-container ql-snow">{{rawHTML .Description}}</div>
                    <button class="add-note" type="submit">Add</button>
                </form>
            </div>
        </div>
        <div class="details__footer">
            <button
            	class="close"
            	hx-put="{{concat "/partials/tasks/" (itoa .ID) "/remove-persistence"}}"
            	hx-swap="none">
                <i class="close-icon"></i>
            </button>
            <span class="creation-date" title="Creation date">{{formatDate .CreatedAt}}</span>
            <button class="remove">
                <i class="trash-icon"></i>
            </button>
        </div>
        {{template "delete-modal" .ID}}
    </rm-task-details>
{{end}}

{{define "delete-modal"}}
    <dialog class="modal">
        <div class="modal__content">
            <span>Task will be permanent deleted, you won't be able to undo this action.</span>
            <div class="modal__actions">
                <button class="btn default">Cancel</button>
                <button
                  class="btn warning"
                  hx-delete="{{concat "/partials/tasks/" (itoa .)}}"
                  hx-swap="outerHTML"
                  hx-target="{{concat ".tasks__list > li[data-id='" (itoa .) "']"}}">Delete task</button>
            </div>
        </div>
    </dialog>
{{end}}
